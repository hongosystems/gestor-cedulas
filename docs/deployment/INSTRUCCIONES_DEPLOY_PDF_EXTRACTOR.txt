â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GUÃA RÃPIDA: DEPLOY PDF EXTRACTOR SERVICE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ ARCHIVOS CREADOS/MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… MICROSERVICIO (carpeta: pdf-extractor-service/)
   - server.js
   - package.json
   - Dockerfile
   - .dockerignore
   - README.md

âœ… NEXT.JS (gestor-cedulas/)
   - app/api/extract-pdf/route.ts (NUEVO)
   - app/app/nueva/page.tsx (MODIFICADO)
   - DEPLOY_PDF_EXTRACTOR.md (documentaciÃ³n completa)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 1: DEPLOYAR MICROSERVICIO EN RENDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Sube la carpeta "pdf-extractor-service" a un repositorio Git
   (puede ser el mismo repo del proyecto o uno separado)

2. Ve a https://render.com â†’ Sign Up / Login

3. Dashboard â†’ "New +" â†’ "Web Service"

4. Conecta tu repositorio (autoriza Render si es la primera vez)

5. ConfiguraciÃ³n:
   â€¢ Name: pdf-extractor-service
   â€¢ Region: Oregon (US West) o la mÃ¡s cercana
   â€¢ Branch: main
   â€¢ Root Directory: pdf-extractor-service (si estÃ¡ en subcarpeta)
   â€¢ Runtime: Docker âš ï¸ IMPORTANTE
   â€¢ Dockerfile Path: Dockerfile
   â€¢ Plan: Free (para probar) o Starter ($7/mes) para producciÃ³n

6. Variables de Entorno (opcional):
   â€¢ MAX_OCR_PAGES=5

7. "Create Web Service"

8. Espera 5-10 minutos para el primer deploy

9. ObtÃ©n la URL del servicio (ej: https://pdf-extractor-service-xxxx.onrender.com)

10. Verifica: Abre https://tu-servicio.onrender.com/health
    DeberÃ­as ver: {"status":"ok","service":"pdf-extractor"}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 2: CONFIGURAR VARIABLES DE ENTORNO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ EN .env.local (desarrollo local)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crea/edita el archivo .env.local en la raÃ­z del proyecto:

PDF_EXTRACTOR_URL=https://tu-servicio.onrender.com/extract

âš ï¸ IMPORTANTE: La URL debe incluir /extract al final

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŒ EN VERCEL (producciÃ³n)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ve a https://vercel.com â†’ Tu proyecto

2. Settings â†’ Environment Variables

3. Agrega:
   â€¢ Name: PDF_EXTRACTOR_URL
   â€¢ Value: https://tu-servicio.onrender.com/extract
   â€¢ Environments: âœ… Production âœ… Preview âœ… Development

4. Save

5. Vuelve a desplegar si ya habÃ­a un deployment anterior
   (o haz git push para que se despliegue automÃ¡ticamente)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 3: DESPLEGAR CAMBIOS A PRODUCCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ejecuta estos comandos en PowerShell (desde C:\proyectos\gestor-cedulas):

git add -A
git commit -m "feat: integraciÃ³n con microservicio PDF extractor"
git push origin main

Vercel desplegarÃ¡ automÃ¡ticamente cuando hagas push a main.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 4: VERIFICAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Microservicio:
   â€¢ Abre https://tu-servicio.onrender.com/health
   â€¢ Debe responder: {"status":"ok"}

âœ… Next.js:
   â€¢ Espera que Vercel termine el deploy
   â€¢ Abre la URL de producciÃ³n
   â€¢ Ve a /app/nueva
   â€¢ Sube un PDF
   â€¢ Los campos "CarÃ¡tula" y "Juzgado" deberÃ­an autocompletarse

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª Testing con curl (PowerShell):

$filePath = "C:\ruta\a\tu\archivo.pdf"

# Probar microservicio directamente:
curl -X POST https://tu-servicio.onrender.com/extract -F "file=@$filePath"

# Probar endpoint Next.js (local):
curl -X POST http://localhost:3000/api/extract-pdf -F "file=@$filePath"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PROBLEMAS COMUNES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ "PDF_EXTRACTOR_URL no estÃ¡ configurada"
   â†’ Verifica que estÃ© en .env.local y en Vercel

âŒ "No se pudo conectar al servicio"
   â†’ Verifica que el microservicio estÃ© corriendo (abre /health)
   â†’ Si estÃ¡ en plan Free, puede estar "dormido" (primera peticiÃ³n tarda ~30s)

âŒ "No se detectÃ³ carÃ¡tula"
   â†’ Esto NO es un error crÃ­tico - el usuario puede completar manualmente
   â†’ Verifica que el PDF tenga texto (no solo imÃ¡genes)

âŒ Build falla en Vercel
   â†’ Ejecuta "npm run build" localmente para ver el error
   â†’ Verifica que no haya errores de TypeScript

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  LOGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š Render (microservicio):
   â€¢ Dashboard â†’ Tu servicio â†’ PestaÃ±a "Logs"

ğŸ“Š Vercel (Next.js):
   â€¢ Dashboard â†’ Tu proyecto â†’ Deployments â†’ Ãšltimo deployment â†’ Logs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMPATIBILIDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… DOCX: Sigue usando los endpoints actuales (/api/extract-caratula, etc.)
âœ… PDF: Ahora usa el nuevo endpoint que reenvÃ­a al microservicio
âœ… Todo lo demÃ¡s: Sin cambios, funciona igual

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para mÃ¡s detalles, ver: DEPLOY_PDF_EXTRACTOR.md
